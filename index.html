<!doctype html>
<html lang="no" data-theme="system">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="color-scheme" content="dark light" />
    <title>Eon AS — Firmapresentasjon</title>
    <meta
      name="description"
      content="Kort firmapresentasjon med team, prosjekter og kontakt — i én offline HTML."
    />
    
    <!-- iOS Safari meta tags (helps force Safari instead of Quick Look) -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Eon AS" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Prevent iOS from treating as "preview" -->
    <meta name="format-detection" content="telephone=no" />
    
    <!-- Android Chrome -->
    <meta name="theme-color" content="#0a0f1e" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

    <style>
      :root {
        /* Typography */
        --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;

        /* Layout */
        --max: 1100px;
        --radius-lg: 20px;
        --radius-md: 14px;
        --radius-sm: 10px;
        --shadow-lg: 0 30px 80px rgba(0, 0, 0, 0.18);
        --shadow-md: 0 12px 32px rgba(0, 0, 0, 0.16);
        --shadow-sm: 0 8px 18px rgba(0, 0, 0, 0.14);
        --border: 1px solid rgba(255, 255, 255, 0.08);

        /* Timing */
        --ease-out: cubic-bezier(0.2, 0.9, 0.2, 1);
        --ease-soft: cubic-bezier(0.16, 1, 0.3, 1);
        --dur-1: 160ms;
        --dur-2: 240ms;
        --dur-3: 420ms;

        /* Color tokens (default = dark, overridden by theme) */
        --bg: #070a12;
        --bg2: #0b1020;
        --panel: rgba(255, 255, 255, 0.06);
        --panel2: rgba(255, 255, 255, 0.08);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.72);
        --muted2: rgba(255, 255, 255, 0.55);
        --line: rgba(255, 255, 255, 0.10);
        --line2: rgba(255, 255, 255, 0.16);
        --brand: #8df0ff;
        --brand2: #a78bfa;
        --good: #5eead4;
        --warn: #fbbf24;

        /* Focus */
        --focus: 0 0 0 3px rgba(141, 240, 255, 0.35),
          0 0 0 6px rgba(167, 139, 250, 0.18);
      }

      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f6f7fb;
          --bg2: #eef1ff;
          --panel: rgba(255, 255, 255, 0.70);
          --panel2: rgba(255, 255, 255, 0.88);
          --text: rgba(10, 15, 30, 0.92);
          --muted: rgba(10, 15, 30, 0.72);
          --muted2: rgba(10, 15, 30, 0.56);
          --line: rgba(10, 15, 30, 0.10);
          --line2: rgba(10, 15, 30, 0.14);
          --shadow-lg: 0 30px 80px rgba(20, 40, 80, 0.16);
          --shadow-md: 0 12px 32px rgba(20, 40, 80, 0.14);
          --shadow-sm: 0 8px 18px rgba(20, 40, 80, 0.12);
        }
      }

      html[data-theme="dark"] {
        color-scheme: dark;
        /* Override @media prefers-color-scheme when dark theme is explicitly selected */
        --bg: #070a12;
        --bg2: #0b1020;
        --panel: rgba(255, 255, 255, 0.06);
        --panel2: rgba(255, 255, 255, 0.08);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.72);
        --muted2: rgba(255, 255, 255, 0.55);
        --line: rgba(255, 255, 255, 0.10);
        --line2: rgba(255, 255, 255, 0.16);
        --shadow-lg: 0 30px 80px rgba(0, 0, 0, 0.18);
        --shadow-md: 0 12px 32px rgba(0, 0, 0, 0.16);
        --shadow-sm: 0 8px 18px rgba(0, 0, 0, 0.14);
      }
      /* Ensure dark theme overrides even when system prefers light */
      @media (prefers-color-scheme: light) {
        html[data-theme="dark"] {
          --bg: #070a12;
          --bg2: #0b1020;
          --panel: rgba(255, 255, 255, 0.06);
          --panel2: rgba(255, 255, 255, 0.08);
          --text: rgba(255, 255, 255, 0.92);
          --muted: rgba(255, 255, 255, 0.72);
          --muted2: rgba(255, 255, 255, 0.55);
          --line: rgba(255, 255, 255, 0.10);
          --line2: rgba(255, 255, 255, 0.16);
          --shadow-lg: 0 30px 80px rgba(0, 0, 0, 0.18);
          --shadow-md: 0 12px 32px rgba(0, 0, 0, 0.16);
          --shadow-sm: 0 8px 18px rgba(0, 0, 0, 0.14);
        }
      }
      html[data-theme="light"] {
        color-scheme: light;
        --bg: #f6f7fb;
        --bg2: #eef1ff;
        --panel: rgba(255, 255, 255, 0.70);
        --panel2: rgba(255, 255, 255, 0.88);
        --text: rgba(10, 15, 30, 0.92);
        --muted: rgba(10, 15, 30, 0.72);
        --muted2: rgba(10, 15, 30, 0.56);
        --line: rgba(10, 15, 30, 0.10);
        --line2: rgba(10, 15, 30, 0.14);
        --shadow-lg: 0 30px 80px rgba(20, 40, 80, 0.16);
        --shadow-md: 0 12px 32px rgba(20, 40, 80, 0.14);
        --shadow-sm: 0 8px 18px rgba(20, 40, 80, 0.12);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        font-family: var(--font-sans);
        color: var(--text);
        background:
          radial-gradient(1200px 700px at 10% 10%, rgba(141, 240, 255, 0.20), transparent 60%),
          radial-gradient(900px 500px at 80% 20%, rgba(167, 139, 250, 0.18), transparent 60%),
          radial-gradient(700px 460px at 70% 90%, rgba(94, 234, 212, 0.14), transparent 55%),
          linear-gradient(180deg, var(--bg), var(--bg2));
        overflow: hidden; /* Desktop: inner scroll container owns scrolling */
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      a:focus-visible,
      button:focus-visible {
        outline: none;
        box-shadow: var(--focus);
      }

      .skip {
        position: absolute;
        left: 12px;
        top: 10px;
        z-index: 1000;
        padding: 10px 12px;
        border-radius: 12px;
        background: var(--panel2);
        border: 1px solid var(--line2);
        transform: translateY(-160%);
        transition: transform var(--dur-2) var(--ease-out);
      }
      .skip:focus {
        transform: translateY(0);
      }

      .topbar {
        position: fixed;
        inset: 0 0 auto 0;
        z-index: 50;
        padding: 14px 16px;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.35),
          rgba(0, 0, 0, 0.0)
        );
        pointer-events: none;
      }

      .topbar-inner {
        max-width: var(--max);
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        pointer-events: auto;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 0;
      }

      .logo {
        width: 38px;
        height: 38px;
        border-radius: 12px;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--line2);
        flex: 0 0 auto;
        object-fit: contain;
        background: rgba(255, 255, 255, 0.06);
      }

      .brand h1 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.2px;
        font-weight: 700;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .brand p {
        margin: 0;
        font-size: 12px;
        color: var(--muted);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--line);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .seg {
        display: inline-flex;
        border-radius: 999px;
        border: 1px solid var(--line);
        overflow: hidden;
      }

      .seg button {
        appearance: none;
        border: 0;
        background: transparent;
        color: var(--muted);
        font: inherit;
        padding: 9px 10px;
        cursor: pointer;
        transition: background var(--dur-2) var(--ease-out),
          color var(--dur-2) var(--ease-out);
      }
      .seg button[aria-pressed="true"] {
        background: rgba(255, 255, 255, 0.09);
        color: var(--text);
      }

      .icon-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
        cursor: pointer;
        transition: transform var(--dur-1) var(--ease-out),
          background var(--dur-2) var(--ease-out);
      }
      .icon-btn:hover {
        transform: translateY(-1px);
        background: rgba(255, 255, 255, 0.08);
      }
      .icon {
        width: 18px;
        height: 18px;
      }

      .scroll {
        height: 100vh;
        height: 100dvh; /* Better on mobile browser UI (iOS/Android) */
        overflow-y: auto;
        scroll-snap-type: y mandatory;
        scroll-behavior: smooth;
        overscroll-behavior: contain;
        -webkit-overflow-scrolling: touch;
        scroll-padding-top: 84px; /* keep content clear of fixed topbar */
      }

      @media (prefers-reduced-motion: reduce) {
        .scroll {
          scroll-behavior: auto;
        }
      }

      .slide {
        min-height: 100vh;
        min-height: 100dvh;
        scroll-snap-align: start;
        display: grid;
        place-items: center;
        padding: 96px 18px 40px;
        position: relative;
      }

      /* Mobile viewers (iOS Files/preview, some in-app browsers) can break nested scrolling.
         Fallback: let the page (body) scroll instead of the inner container. */
      @media (hover: none) and (pointer: coarse) {
        body {
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }
        .scroll {
          height: auto;
          overflow: visible;
          scroll-snap-type: none;
        }
        html {
          scroll-snap-type: y mandatory;
          scroll-padding-top: 84px;
        }
        body > .scroll > .slide {
          scroll-snap-align: start;
        }
        /* If JS-based reveal doesn't run in a mobile viewer, never hide content */
        [data-reveal] {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
        }
      }

      .slide-inner {
        width: 100%;
        max-width: var(--max);
        margin: 0 auto;
      }

      .panel {
        background: var(--panel);
        border: 1px solid var(--line);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
      }

      .hero {
        padding: 36px;
        position: relative;
        overflow: hidden;
      }

      .hero::before,
      .hero::after {
        content: "";
        position: absolute;
        inset: auto auto -140px -160px;
        width: 380px;
        height: 380px;
        border-radius: 999px;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(141, 240, 255, 0.55),
          rgba(167, 139, 250, 0.25),
          transparent 70%
        );
        filter: blur(2px);
        opacity: 0.9;
        pointer-events: none;
      }
      .hero::after {
        inset: -160px -180px auto auto;
        width: 460px;
        height: 460px;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(167, 139, 250, 0.45),
          rgba(94, 234, 212, 0.25),
          transparent 70%
        );
        opacity: 0.8;
      }

      .hero-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 22px;
        align-items: center;
      }
      @media (max-width: 900px) {
        .hero-grid {
          grid-template-columns: 1fr;
        }
        .hero {
          padding: 26px;
        }
      }

      .kicker {
        display: inline-flex;
        gap: 10px;
        align-items: center;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        font-size: 13px;
        color: var(--muted);
        width: fit-content;
      }
      .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: linear-gradient(90deg, var(--brand), var(--brand2));
        box-shadow: 0 0 0 4px rgba(141, 240, 255, 0.12);
      }

      .hero h2 {
        margin: 14px 0 10px;
        font-size: clamp(34px, 4.6vw, 56px);
        line-height: 1.02;
        letter-spacing: -0.03em;
      }

      .hero p {
        margin: 0;
        font-size: 16px;
        line-height: 1.55;
        color: var(--muted);
        max-width: 62ch;
      }

      .cta-row {
        margin-top: 18px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid var(--line2);
        background: rgba(255, 255, 255, 0.06);
        color: var(--text);
        cursor: pointer;
        font: inherit;
        transition: transform var(--dur-1) var(--ease-out),
          background var(--dur-2) var(--ease-out),
          border-color var(--dur-2) var(--ease-out);
      }
      .btn:hover {
        transform: translateY(-1px);
        background: rgba(255, 255, 255, 0.09);
        border-color: rgba(255, 255, 255, 0.25);
      }

      .btn.primary {
        background: linear-gradient(90deg, rgba(141, 240, 255, 0.22), rgba(167, 139, 250, 0.20));
        border-color: rgba(141, 240, 255, 0.24);
      }

      .stats {
        display: grid;
        gap: 10px;
      }
      .stat {
        padding: 14px 14px;
        border-radius: 16px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
      }
      .stat strong {
        display: block;
        font-size: 14px;
        letter-spacing: 0.2px;
      }
      .stat span {
        display: block;
        margin-top: 2px;
        font-size: 13px;
        color: var(--muted);
      }

      .section-head {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        gap: 18px;
        margin-bottom: 16px;
      }
      .section-head h3 {
        margin: 0;
        font-size: 18px;
        letter-spacing: -0.01em;
      }
      .section-head p {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
        max-width: 60ch;
      }

      .grid {
        display: grid;
        gap: 14px;
      }
      .grid.two {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid.three {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      @media (max-width: 900px) {
        .grid.two,
        .grid.three {
          grid-template-columns: 1fr;
        }
      }

      /* Projects swipe container for mobile */
      .projects-container {
        width: 100%;
      }
      .projects-scroll {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 14px;
      }
      @media (hover: none) and (pointer: coarse) {
        .projects-scroll {
          display: flex;
          overflow-x: auto;
          overflow-y: hidden;
          scroll-snap-type: x mandatory;
          scroll-behavior: smooth;
          -webkit-overflow-scrolling: touch;
          gap: 14px;
          padding: 0 14px 8px;
          margin: 0 -14px;
          /* Hide scrollbar but keep functionality */
          scrollbar-width: none;
          -ms-overflow-style: none;
        }
        .projects-scroll::-webkit-scrollbar {
          display: none;
        }
        .projects-scroll .project {
          flex: 0 0 calc(100% - 28px);
          min-width: calc(100% - 28px);
          max-width: calc(100% - 28px);
          scroll-snap-align: center;
          scroll-snap-stop: always;
        }
      }
      @media (min-width: 901px) {
        .projects-scroll {
          display: grid;
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }

      .card {
        padding: 18px;
        border-radius: var(--radius-md);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        box-shadow: var(--shadow-sm);
        transition: transform var(--dur-1) var(--ease-out),
          border-color var(--dur-2) var(--ease-out),
          background var(--dur-2) var(--ease-out);
      }
      .card:hover {
        transform: translateY(-2px);
        border-color: rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.07);
      }

      .muted {
        color: var(--muted);
      }

      .small {
        font-size: 13px;
        line-height: 1.55;
      }

      .kv {
        display: grid;
        grid-template-columns: 160px 1fr;
        gap: 10px 14px;
        align-items: start;
        margin-top: 12px;
      }
      @media (max-width: 700px) {
        .kv {
          grid-template-columns: 1fr;
        }
      }
      .kv dt {
        color: var(--muted2);
        font-size: 12px;
        letter-spacing: 0.02em;
        text-transform: uppercase;
        margin: 0;
      }
      .kv dd {
        margin: 0;
        color: var(--text);
        font-size: 14px;
      }

      .timeline {
        display: grid;
        gap: 10px;
        margin-top: 14px;
      }
      .tl {
        padding: 14px;
        border-radius: var(--radius-md);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
      }
      .tl-top {
        display: flex;
        flex-wrap: wrap;
        align-items: baseline;
        justify-content: space-between;
        gap: 10px;
      }
      .tl h5 {
        margin: 0;
        font-size: 14px;
        letter-spacing: -0.01em;
      }
      .tl .when {
        font-family: var(--font-mono);
        font-size: 12px;
        color: var(--muted);
      }
      .tl p {
        margin: 8px 0 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.55;
      }

      /* Modal */
      .modal {
        position: fixed;
        inset: 0;
        z-index: 120;
        display: none;
        background: rgba(0, 0, 0, 0.45);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        padding: 18px;
      }

      /* Mobile "preview" helper overlay (iOS Quick Look / in-app viewers) */
      .open-safari {
        position: fixed;
        inset: 0;
        z-index: 9999; /* Very high z-index to ensure it's on top */
        display: none;
        align-items: center;
        justify-content: center;
        padding: 18px;
        background: rgba(0, 0, 0, 0.85); /* Darker background for more visibility */
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        animation: fadeIn 0.3s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      .open-safari.open {
        display: flex;
      }
      .open-safari .card {
        width: min(520px, 100%);
        max-height: 90vh;
        overflow-y: auto;
        padding: 24px;
        border-radius: 20px;
        border: 2px solid var(--line); /* Thicker border */
        background: var(--panel);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); /* Stronger shadow */
        animation: slideUp 0.3s ease-out;
      }
      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .open-safari h3 {
        margin: 0 0 6px;
        font-size: 18px;
      }
      .open-safari p {
        margin: 0 0 12px;
        color: var(--muted);
        line-height: 1.35;
      }
      .open-safari ol {
        margin: 0 0 12px 18px;
        padding: 0;
      }
      .open-safari .row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 12px;
      }
      .btn-primary {
        appearance: none;
        border: 0;
        cursor: pointer;
        border-radius: 14px;
        padding: 12px 14px;
        font: inherit;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        color: white;
        box-shadow: 0 12px 30px rgba(94, 234, 212, 0.18);
      }
      .btn-ghost {
        appearance: none;
        border: 1px solid var(--line);
        cursor: pointer;
        border-radius: 14px;
        padding: 12px 14px;
        font: inherit;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
      }
      .modal.open {
        display: grid;
        place-items: center;
      }
      .modal-dialog {
        width: min(980px, 100%);
        max-height: min(84vh, 920px);
        overflow: auto;
        border-radius: var(--radius-lg);
        border: 1px solid var(--line2);
        background: var(--panel2);
        box-shadow: var(--shadow-lg);
      }
      .modal-head {
        position: sticky;
        top: 0;
        z-index: 2;
        padding: 14px 16px;
        border-bottom: 1px solid var(--line);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.10),
          rgba(255, 255, 255, 0.06)
        );
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .modal-head strong {
        font-size: 14px;
        letter-spacing: -0.01em;
      }
      .modal-body {
        padding: 18px;
      }

      .bullets {
        margin: 10px 0 0;
        padding-left: 18px;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.55;
      }
      .bullets li {
        margin: 6px 0;
      }

      .person {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 14px;
        align-items: start;
      }
      .avatar {
        width: 56px;
        height: 56px;
        border-radius: 18px;
        border: 1px solid var(--line2);
        background: radial-gradient(
          60px 60px at 30% 30%,
          rgba(141, 240, 255, 0.65),
          rgba(167, 139, 250, 0.40)
        );
        display: grid;
        place-items: center;
        font-weight: 800;
        letter-spacing: 0.06em;
        color: rgba(10, 15, 30, 0.88);
        box-shadow: var(--shadow-sm);
        flex: 0 0 auto;
      }
      html[data-theme="dark"] .avatar,
      html[data-theme="system"] .avatar {
        color: rgba(255, 255, 255, 0.92);
      }

      .person h4 {
        margin: 0;
        font-size: 16px;
        letter-spacing: -0.01em;
      }
      .person .role {
        margin: 2px 0 10px;
        color: var(--muted);
        font-size: 13px;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--muted);
        padding: 7px 9px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
      }
      .chip .mini {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: linear-gradient(90deg, var(--brand), var(--brand2));
        opacity: 0.9;
      }

      .project-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .project-media {
        margin-top: 12px;
        border-radius: 16px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        overflow: hidden;
        aspect-ratio: 16 / 10;
      }
      .project-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        filter: saturate(1.02) contrast(1.03);
      }
      .project-title h4 {
        margin: 0;
        font-size: 15px;
      }
      .project-title a {
        font-size: 12px;
        color: var(--muted);
        border: 1px solid var(--line);
        padding: 7px 9px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.04);
      }
      .project-title a:hover {
        color: var(--text);
        border-color: rgba(255, 255, 255, 0.22);
      }
      .project p {
        margin: 10px 0 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.55;
      }

      .steps {
        display: grid;
        gap: 12px;
      }
      .step {
        display: grid;
        grid-template-columns: 38px 1fr;
        gap: 12px;
        align-items: start;
        padding: 14px;
        border-radius: var(--radius-md);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
      }
      .badge {
        width: 38px;
        height: 38px;
        border-radius: 14px;
        border: 1px solid var(--line2);
        background: rgba(255, 255, 255, 0.05);
        display: grid;
        place-items: center;
      }
      .step h4 {
        margin: 0;
        font-size: 14px;
      }
      .step p {
        margin: 4px 0 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.5;
      }

      .contact {
        padding: 26px;
      }
      .contact-row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        margin-top: 10px;
      }
      .kbd {
        font-family: var(--font-mono);
        font-size: 12px;
        color: var(--muted);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        padding: 6px 8px;
        border-radius: 10px;
      }

      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        z-index: 80;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid var(--line2);
        border-radius: 999px;
        padding: 10px 12px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: var(--shadow-md);
        opacity: 0;
        pointer-events: none;
        transition: opacity var(--dur-2) var(--ease-out),
          transform var(--dur-2) var(--ease-out);
      }
      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-2px);
      }
      .toast span {
        font-size: 13px;
        color: var(--text);
      }

      /* Right-side nav dots */
      .dots {
        position: fixed;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 60;
        display: grid;
        gap: 10px;
        padding: 12px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }
      .dots a {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        border: 1px solid var(--line2);
        background: rgba(255, 255, 255, 0.06);
        display: block;
        transition: transform var(--dur-1) var(--ease-out),
          background var(--dur-2) var(--ease-out),
          border-color var(--dur-2) var(--ease-out);
      }
      .dots a[aria-current="true"] {
        background: linear-gradient(90deg, rgba(141, 240, 255, 0.7), rgba(167, 139, 250, 0.65));
        border-color: rgba(141, 240, 255, 0.35);
        transform: scale(1.18);
      }
      @media (max-width: 900px) {
        .dots {
          display: none;
        }
      }

      /* Reveal animations */
      [data-reveal] {
        opacity: 0;
        transform: translateY(12px);
        transition: opacity var(--dur-3) var(--ease-soft),
          transform var(--dur-3) var(--ease-soft);
        will-change: opacity, transform;
      }
      [data-reveal].is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      @media (prefers-reduced-motion: reduce) {
        [data-reveal] {
          transition: none;
          opacity: 1;
          transform: none;
        }
      }

      .footer-hint {
        margin-top: 14px;
        color: var(--muted2);
        font-size: 13px;
      }
    </style>
  </head>

  <body>
    <a class="skip" href="#slide-1">Hopp til innhold</a>

    <!-- Mobile preview helper: iOS Quick Look / in-app viewers may not run all JS/CSS correctly -->
    <div class="open-safari" id="openSafari" role="dialog" aria-modal="true" aria-labelledby="openSafariTitle">
      <div class="card panel">
        <h3 id="openSafariTitle" style="margin-top:0; font-size:20px; font-weight:700;">
          ⚠️ Åpne i Safari for best opplevelse
        </h3>
        <p style="font-size:15px; line-height:1.6; margin-bottom:20px;">
          Denne filen er åpnet i en forhåndsvisning. For å få alle funksjoner (slides, animasjoner, popups)
          <strong>må den åpnes i Safari</strong>.
        </p>
        <div id="iosInstructions" style="display:none">
          <ol>
            <li>Trykk <b>Del</b> (share-ikonet)</li>
            <li>Velg <b>Åpne i Safari</b></li>
          </ol>
          <p style="margin-top:12px; font-size:12px; opacity:0.9">
            Tips: Lagre i <b>Filer</b>-appen først, så åpne derfra for best resultat.
          </p>
        </div>
        <div id="androidInstructions" style="display:none">
          <ol>
            <li>Trykk <b>⋮</b> (meny) eller <b>Del</b></li>
            <li>Velg <b>Åpne med</b> → <b>Chrome</b></li>
          </ol>
          <p style="margin-top:12px; font-size:12px; opacity:0.9">
            Tips: Last ned filen først, så åpne den i Chrome.
          </p>
        </div>
        <div class="row">
          <button type="button" class="btn-primary" id="openSafariBtn">Åpne i nettleser</button>
          <button type="button" class="btn-ghost" id="dismissSafariBtn">Fortsett her</button>
        </div>
      </div>
    </div>

    <header class="topbar" role="banner">
      <div class="topbar-inner">
        <div class="brand" aria-label="Merkevare">
          <!-- Logo -->
          <img class="logo" src="bilder/logo.jpeg" alt="Logo" />
          <div style="min-width:0">
            <h1 id="companyName">Eon AS</h1>
            <p id="companyTagline">To personer. Store leveranser.</p>
          </div>
        </div>

        <div class="actions">
          <div class="pill" aria-label="Tema og navigasjon">
            <div class="seg" role="group" aria-label="Tema">
              <button type="button" data-theme-btn="system" aria-pressed="true" title="System">
                Auto
              </button>
              <button type="button" data-theme-btn="light" aria-pressed="false" title="Lys">
                Lys
              </button>
              <button type="button" data-theme-btn="dark" aria-pressed="false" title="Mørk">
                Mørk
              </button>
            </div>

            <button
              class="icon-btn"
              type="button"
              id="nextBtn"
              title="Neste slide (↓)"
              aria-label="Neste slide"
            >
              <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path
                  d="M12 5v12m0 0 5-5m-5 5-5-5"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </header>

    <nav class="dots" aria-label="Slides">
      <a href="#slide-1" aria-current="true" aria-label="Slide 1"></a>
      <a href="#slide-2" aria-current="false" aria-label="Slide 2"></a>
      <a href="#slide-3" aria-current="false" aria-label="Slide 3"></a>
      <a href="#slide-4" aria-current="false" aria-label="Slide 4"></a>
      <a href="#slide-5" aria-current="false" aria-label="Slide 5"></a>
      <a href="#slide-6" aria-current="false" aria-label="Slide 6"></a>
    </nav>

    <main id="main" class="scroll" tabindex="-1" aria-label="Firmapresentasjon">
      <!-- Slide 1: HERO -->
      <section class="slide" id="slide-1" aria-label="Intro">
        <div class="slide-inner">
          <div class="panel hero" data-reveal>
            <div class="hero-grid">
              <div>
                <div class="kicker">
                  <span class="dot" aria-hidden="true"></span>
                  <span></span>
                </div>
                <h2>
                  Eon AS — to personer, full leveransekraft.
                </h2>
                <p>
                  Vi tar eierskap fra idé til drift: robuste integrasjoner, moderne UI, og drift som tåler virkeligheten.
                </p>

                <div class="cta-row" role="group" aria-label="Hurtigvalg">
                  <a class="btn primary" href="#slide-3">
                    Se prosjekter
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M5 12h12m0 0-5-5m5 5-5 5"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                  <a class="btn" href="#slide-6">
                    Kontakt oss
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v1m18 0v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8m18 0-9 6L3 8"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                  <span class="kbd" aria-label="Tips">Tips: bruk piltaster ↑ ↓</span>
                </div>

                <p class="footer-hint">
                  
                </p>
              </div>

              <div class="stats" aria-label="Høydepunkter">
                <div class="stat">
                  <strong>Raskt til verdi</strong>
                  <span>Prototyp → MVP → produksjon, med god kvalitet.</span>
                </div>
                <div class="stat">
                  <strong>Moderne stack</strong>
                  <span>Web, API, sky, CI/CD, observability.</span>
                </div>
                <div class="stat">
                  <strong>Design + engineering</strong>
                  <span>UI/UX, animasjoner og tilgjengelighet.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Slide 2: TEAM -->
      <section class="slide" id="slide-2" aria-label="Team">
        <div class="slide-inner">
          <div class="section-head" data-reveal>
            <div>
              <h3>Hvem vi er</h3>
              <p>
                To personer, komplementære styrker. Vi jobber tett, kommuniserer klart og leverer som et lite,
                fokusert team.
              </p>
            </div>
          </div>

          <div class="grid two" data-reveal>
            <article class="card person" aria-label="Person 1">
              <div class="avatar" aria-hidden="true">EN</div>
              <div>
                <h4>Erik Nerhus</h4>
                <div class="role">Rolle: Fullstack / Arkitektur</div>
                <div class="chips" aria-label="Stikkord">
                  <span class="chip"><span class="mini" aria-hidden="true"></span>Backend</span>
                  <span class="chip"><span class="mini" aria-hidden="true"></span>Cloud</span>
                  <span class="chip"><span class="mini" aria-hidden="true"></span>CI/CD</span>
                </div>
                <div class="cta-row" style="margin-top:12px">
                  <button class="btn" type="button" data-open-modal="erik">
                    Side om Erik
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M5 12h12m0 0-5-5m5 5-5 5"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </article>

            <article class="card person" aria-label="Person 2">
              <div class="avatar" aria-hidden="true">TN</div>
              <div>
                <h4>Tommy Nordmarken</h4>
                <div class="role">Rolle: Prosjektleder tekniske fag / ITB • Automasjon &amp; drift</div>
                <div class="chips" aria-label="Stikkord">
                  <span class="chip"><span class="mini" aria-hidden="true"></span>Prosjektledelse</span>
                  <span class="chip"><span class="mini" aria-hidden="true"></span>PLS/SCADA</span>
                  <span class="chip"><span class="mini" aria-hidden="true"></span>ITB</span>
                  <span class="chip"><span class="mini" aria-hidden="true"></span>Digitalisering</span>
                </div>
                <div class="cta-row" style="margin-top:12px">
                  <button class="btn" type="button" data-open-modal="tommy">
                    Side om Tommy
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M5 12h12m0 0-5-5m5 5-5 5"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- Slide 3: PROJECTS (1) -->
      <section class="slide" id="slide-3" aria-label="Prosjekter 1">
        <div class="slide-inner">
          <div class="section-head" data-reveal>
            <div>
              <h3>Prosjekter</h3>
              <p>Et utvalg av prosjekter. Under er et konkret case fra Helipad (ModbusTCP industri-HMI).</p>
            </div>
          </div>

          <div class="projects-container" data-reveal>
            <div class="projects-scroll">
              <article class="card project" aria-label="Helipad">
              <div class="project-title">
                <h4>Helipad 2.0</h4>
                <button class="btn" type="button" data-open-modal="helipad" style="padding:8px 10px">
                  Les mer
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M5 12h12m0 0-5-5m5 5-5 5"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
              </div>
              <div class="project-media" aria-label="Bilde">
                <img src="bilder/helipad-1.jpeg" alt="Helipad prosjektbilde" loading="lazy" />
              </div>
              <div class="chips" style="margin-top:10px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>React + TypeScript</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Vite + Tailwind</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Rust (Axum/Tokio)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>ModbusTCP</span>
              </div>
              <p>
                Moderne HMI/management-system for industrielt utstyr via ModbusTCP — rask oversikt, kontroll og drift i felt.
              </p>
            </article>

            <article class="card project" aria-label="Ås Betong (Drift System)">
              <div class="project-title">
                <h4>Ås Betong — Drift System</h4>
                <button class="btn" type="button" data-open-modal="aas" style="padding:8px 10px">
                  Les mer
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M5 12h12m0 0-5-5m5 5-5 5"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button>
              </div>
              <div class="chips" style="margin-top:10px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>React + TypeScript</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Rust (Axum/Tokio)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Modbus</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>SSE / polling</span>
              </div>
              <p>
                Drift- og kontrollsystem for produksjonsmiljø, med syklisk Modbus-kommunikasjon, konfigurérbare UI-mappinger,
                alarmer og versjonsstyrt deploy/rollback.
              </p>
            </article>
            </div>
            <!-- Prosjekt C fjernet inntil videre -->
          </div>
        </div>
      </section>

      <!-- Slide 4: PROJECTS (2) -->
      <section class="slide" id="slide-4" aria-label="Prosjekter 2">
        <div class="slide-inner">
          <div class="section-head" data-reveal>
            <div>
              <h3>Flere prosjekter</h3>
              <p></p>
            </div>
          </div>

          <div class="grid two" data-reveal>
            <article class="card project" aria-label="Prosjekt D">
              <!-- Tomt prosjektkort (placeholder) -->
            </article>

            <article class="card project" aria-label="Prosjekt E">
              <!-- Tomt prosjektkort (placeholder) -->
            </article>
          </div>
        </div>
      </section>

      <!-- Slide 5: PROCESS -->
      <section class="slide" id="slide-5" aria-label="Prosess">
        <div class="slide-inner">
          <div class="section-head" data-reveal>
            <div>
              <h3>Vår tilnærming</h3>
              <p>En enkel prosess som gir forutsigbarhet, tempo og kvalitet.</p>
            </div>
          </div>

          <div class="steps" data-reveal>
            <div class="step">
              <div class="badge" aria-hidden="true">
                <svg class="icon" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M12 20V10m0 10-4-4m4 4 4-4M5 4h14"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div>
                <h4>1) Avklaring</h4>
                <p>Vi spisser mål, scope og suksesskriterier. Kort vei fra behov til plan.</p>
              </div>
            </div>

            <div class="step">
              <div class="badge" aria-hidden="true">
                <svg class="icon" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M4 14l6-6 4 4 6-6M4 20h16"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div>
                <h4>2) Design + prototyp</h4>
                <p>Vi bygger riktig løsning tidlig: flows, UI, og tydelige prioriteringer.</p>
              </div>
            </div>

            <div class="step">
              <div class="badge" aria-hidden="true">
                <svg class="icon" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M8 12h8M12 8v8M6 20h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div>
                <h4>3) Leveranse</h4>
                <p>Kode med kvalitet: testing, CI/CD, logging/metrics, og ryddig drift.</p>
              </div>
            </div>

            <div class="step">
              <div class="badge" aria-hidden="true">
                <svg class="icon" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M20 12a8 8 0 1 1-2.34-5.66M20 4v6h-6"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div>
                <h4>4) Forbedring</h4>
                <p>Vi itererer på data og tilbakemeldinger. Små forbedringer gir stor effekt.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Slide 6: CONTACT -->
      <section class="slide" id="slide-6" aria-label="Kontakt">
        <div class="slide-inner">
          <div class="panel contact" data-reveal>
            <div class="section-head" style="margin-bottom:10px">
              <div>
                <h3>Kontakt</h3>
                <p>Ta kontakt for en uforpliktende prat. Vi svarer raskt.</p>
              </div>
            </div>

            <div class="grid two" style="margin-top:14px">
              <div class="card">
                <h4 style="margin:0">E-post</h4>
                <div class="contact-row" aria-label="E-postvalg" style="margin-top:12px">
                  <button class="btn primary" type="button" data-copy="tommy.nordmarken@eon-as.no">
                    Kopier Tommy
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M8 7h11v14H8V7Zm-3 3H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h9v-1"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                  <a class="btn" href="mailto:tommy.nordmarken@eon-as.no">
                    Send til Tommy
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v1m18 0v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8m18 0-9 6L3 8"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                </div>

                <div class="contact-row" aria-label="E-postvalg" style="margin-top:10px">
                  <button class="btn" type="button" data-copy="erik.nerhus@eon-as.no">
                    Kopier Erik
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M8 7h11v14H8V7Zm-3 3H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h9v-1"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                  <a class="btn" href="mailto:erik.nerhus@eon-as.no">
                    Send til Erik
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v1m18 0v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8m18 0-9 6L3 8"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                </div>
              </div>

              <div class="card">
                <h4 style="margin:0">Telefon</h4>
                <p class="muted small" style="margin:10px 0 0">Tommy Nordmarken: +47 400 48 737</p>
                <div class="contact-row" aria-label="Telefonvalg" style="margin-top:12px">
                  <a class="btn primary" href="tel:+4740048737">
                    Ring Tommy
                    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.11 4.18 2 2 0 0 1 4.09 2h3a2 2 0 0 1 2 1.72c.12.86.3 1.7.54 2.5a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.58-1.09a2 2 0 0 1 2.11-.45c.8.24 1.64.42 2.5.54A2 2 0 0 1 22 16.92Z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>

          </div>
        </div>
      </section>
    </main>

    <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true">
      <span id="toastText">Kopiert</span>
    </div>

    <!-- Modal: Erik Nerhus -->
    <section class="modal" id="modal-erik" role="dialog" aria-modal="true" aria-labelledby="modal-erik-title">
      <div class="modal-dialog">
        <div class="modal-head">
          <strong id="modal-erik-title">Erik Nerhus — Senior Software / Control Systems</strong>
          <button class="icon-btn" type="button" data-close-modal aria-label="Lukk">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M6 6l12 12M18 6 6 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="grid two">
            <div class="card">
              <div class="person" style="grid-template-columns:auto 1fr">
                <div class="avatar" aria-hidden="true">EN</div>
                <div>
                  <h4 style="margin:0">Profil</h4>
                  <p class="muted small" style="margin:8px 0 0">
                    MSc-utdannet ingeniør med bakgrunn fra marine- og oil &amp; gas-industrien. Spesialisert i
                    commissioning, utvikling og videreutvikling av kontrollsystemer og automatisering — med tydelig
                    fokus på sikker drift, feilsøking under tidspress og produktleveranser som tåler offshore-virkeligheten.
                  </p>
                </div>
              </div>

              <dl class="kv" aria-label="Nøkkelfakta">
                <dt>Nåværende rolle</dt>
                <dd>Senior Software Service Engineer (HMH)</dd>
                <dt>Fokusområder</dt>
                <dd>Drilling automation, kontrollsystemer, commissioning, operasjonell oppfølging</dd>
                <dt>Bransjer</dt>
                <dd>Offshore drilling / oil &amp; gas, marine (SES)</dd>
                <dt>Styrker</dt>
                <dd>Feilsøking, systemforbedringer, crew training, tverrfaglig samarbeid</dd>
              </dl>
            </div>

            <div class="card">
              <h4 style="margin:0">Høydepunkter</h4>
              <div class="chips" style="margin-top:12px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>ADC (Automatic Drilling Control)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>DEAL™ / CADS</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Early Kick Detection</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Soft Torque Z</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Driller’s Assist</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Ride/Boarding Control (marine)</span>
              </div>
              <p class="muted small" style="margin:12px 0 0">
                Har bidratt til software-produktlanseringer og videreutvikling av drilling-automatisering, samt ledet
                leveranser/installasjon i felt (inkl. software lead ved DCMS-commissioning på Grane).
              </p>
              <p class="muted small" style="margin:10px 0 0">
                Erfaring med full-stack utvikling for neste generasjons Surface Effect Ships (SES), inkl. simulator
                (Unity/C#), integrasjon, og remote access over 4G med fokus på cybersikkerhet.
              </p>
            </div>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Erfaring (utdrag)</h4>
            <div class="timeline" aria-label="Tidslinje">
              <div class="tl">
                <div class="tl-top">
                  <h5>HMH — Senior Software Service Engineer</h5>
                  <div class="when">Jun 2022 – nå</div>
                </div>
                <p>
                  Commissioning og oppfølging av ADC-produkter (DEAL/CADS, Early Kick Detection, Soft Torque Z,
                  BeAware/Driller’s Assist). Crew training, feilsøking og korrigerende tiltak ved downtime/kritiske feil.
                  Software lead ved installasjon/commissioning av DCMS på Grane.
                </p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>MHWirth — Senior Software Engineer (ADC)</h5>
                  <div class="when">Mar 2019 – Jun 2020</div>
                </div>
                <p>
                  Utvikling/forbedring av drilling-automatisering: DEAL™ API (gateway til automasjon), Driller’s Assist™
                  (well protection), CADS 2.0™ (computer assisted drilling), Soft Torque Z (reduksjon av stick-slip).
                  Tverrfaglig samarbeid med domeneeksperter og klasseselskaper.
                </p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>ESNA AS — Control System Engineer</h5>
                  <div class="when">Mar 2016 – Jun 2019</div>
                </div>
                <p>
                  Full-stack utvikling av SES-kontrollsystemer, 3D simulator for testing/visualisering (Unity/C#),
                  integrasjon i fartøy, P&amp;ID/dokumentasjon for klassing, samt remote access over 4G og cybersikkerhet.
                </p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Aker Solutions — Software Service Engineer</h5>
                  <div class="when">Sep 2014 – Feb 2016</div>
                </div>
                <p>
                  Commissioning av Cat-D drilling rigs (Songa Offshore/Statoil) ved DSME (Sør-Korea) og offshore support.
                  Kontrollsysteminstallasjon, tuning, upgrades/overhauls, troubleshooting og vendor-/kunde-koordinering.
                </p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Norwegian Armed Forces — Mechanical Engineer</h5>
                  <div class="when">Mar 2013 – Mar 2014</div>
                </div>
                <p>
                  3D-modellering og animasjon (Inventor, 3D Studio Max) for prosjekter knyttet til Navy-fartøy og utstyr.
                </p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Aker Solutions — Software Test Engineer</h5>
                  <div class="when">Jun 2012 – Sep 2014</div>
                </div>
                <p>
                  Testing av kontrollsystemer/instrumentering for offshore drilling. Bygget testprosedyrer og fasiliteter,
                  med målbar reduksjon i feilrate ved commissioning.
                </p>
              </div>
            </div>
          </div>

          <div class="grid two" style="margin-top:14px">
            <div class="card">
              <h4 style="margin:0">Utdanning</h4>
              <div class="timeline" style="margin-top:12px">
                <div class="tl">
                  <div class="tl-top">
                    <h5>MSc — Industrial economics &amp; technology management</h5>
                    <div class="when">2023</div>
                  </div>
                  <p>University of Agder, Norway</p>
                </div>
                <div class="tl">
                  <div class="tl-top">
                    <h5>BSc — Mechatronics (robotics &amp; control systems)</h5>
                    <div class="when">2012</div>
                  </div>
                  <p>University of Agder, Norway</p>
                </div>
                <div class="tl">
                  <div class="tl-top">
                    <h5>Automation</h5>
                    <div class="when">2008</div>
                  </div>
                  <p>Kvadraturen High School, Norway</p>
                </div>
              </div>
            </div>
            <div class="card">
              <h4 style="margin:0">Kompetanse (kort)</h4>
              <div class="chips" style="margin-top:12px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>Commissioning</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Control systems</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Automation</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Troubleshooting</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Training</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Cyber security (remote)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Unity/C# (simulator)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>CAD (AutoCAD/Inventor)</span>
              </div>
              <p class="muted small" style="margin:12px 0 0">
                Denne siden er en modernisert, “presentasjonsvennlig” oppsummering av CV-en. Vi kan også lage en
                tilsvarende side for Tommy og hente ut 4–8 prosjekt-caser til prosjektslidene.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal: Tommy Nordmarken -->
    <section class="modal" id="modal-tommy" role="dialog" aria-modal="true" aria-labelledby="modal-tommy-title">
      <div class="modal-dialog">
        <div class="modal-head">
          <strong id="modal-tommy-title">Tommy Nordmarken — Prosjektleder tekniske fag / ITB</strong>
          <button class="icon-btn" type="button" data-close-modal aria-label="Lukk">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M6 6l12 12M18 6 6 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="grid two">
            <div class="card">
              <div class="person" style="grid-template-columns:auto 1fr">
                <div class="avatar" aria-hidden="true">TN</div>
                <div>
                  <h4 style="margin:0">Profil</h4>
                  <p class="muted small" style="margin:8px 0 0">
                    Erfaren og løsningsorientert ingeniør innen elektro, automasjon og kontrollsystemer, med bakgrunn fra
                    både militær og sivil sektor. Kombinerer teknisk dybde med prosjektledelse/ITB, og er vant til å lede
                    team og leveranser fra idé til ferdig idriftsettelse i krevende miljøer (offshore, verft, VA, tunnel og maritimt).
                  </p>
                </div>
              </div>

              <dl class="kv" aria-label="Nøkkelfakta">
                <dt>Rolle</dt>
                <dd>Prosjektleder tekniske fag / ITB • Automasjon</dd>
                <dt>Lokasjon</dt>
                <dd>Kristiansand</dd>
                <dt>Telefon</dt>
                <dd>+47 400 48 737</dd>
                <dt>Styrker</dt>
                <dd>Koordinering, kommunikasjon, integrasjonstest, driftsoptimalisering, endringsledelse</dd>
              </dl>
            </div>

            <div class="card">
              <h4 style="margin:0">Kompetanse (utdrag)</h4>
              <div class="chips" style="margin-top:12px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>Prosjektledelse</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>ITB</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>PLS/SCADA</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Siemens TIA</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Allen Bradley</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Mitsubishi</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Workshops/Sprint</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Digitalisering/IoT</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Sky (cloud)</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Python</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>SQL</span>
              </div>
              <p class="muted small" style="margin:12px 0 0">
                Tommy har også erfaring med anbud, teknologivalg og implementeringer som CTO/co‑founder i flere miljøer.
              </p>
            </div>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Erfaring (utdrag)</h4>
            <div class="timeline" aria-label="Tidslinje">
              <div class="tl">
                <div class="tl-top">
                  <h5>HMHW AS — Senior Engineer</h5>
                  <div class="when">2024 – d.d.</div>
                </div>
                <p>Teknisk support mot oljeplattform i drift.</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Opt‑E AS — Senior prosjektingeniør</h5>
                  <div class="when">2024</div>
                </div>
                <p>Prosjektplanlegging, programmering (Python / CoDeSys), survey og energiberegning.</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Motus Technology — Senior prosjektingeniør</h5>
                  <div class="when">2022 – 2024</div>
                </div>
                <p>Kontrollsystem til 3D-kompenserte gangveier (walk‑to‑work) med Siemens TIA og redundante safety-PLS (S7‑1500).</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>BRE Digital — Co‑founder / CTO</h5>
                  <div class="when">2020 – 2022</div>
                </div>
                <p>Prosjektledelse, teknologivalg, skytjenester, hardware og anbud.</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Energos Solution — Co‑founder / CTO</h5>
                  <div class="when">2016 – 2019</div>
                </div>
                <p>Teknologivalg, implementeringer og leveranser på tvers av hardware/software.</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>MHWirth / HMHW — Software Service Engineer</h5>
                  <div class="when">2013 – 2016</div>
                </div>
                <p>Igangsetting av Songa Cat‑D rigger ved DSME Shipyard (Sør‑Korea).</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Norcon Engineering / Tratec — Software Service Engineer</h5>
                  <div class="when">2011 – 2013</div>
                </div>
                <p>Serviceoppdrag på land og offshore (tunnel, VA, renseanlegg, skip og oljeinstallasjoner).</p>
              </div>
              <div class="tl">
                <div class="tl-top">
                  <h5>Luftforsvaret — Systemoffiser radar</h5>
                  <div class="when">2005 – 2011</div>
                </div>
                <p>Drift og vedlikehold av radar-/overvåkingssystemer og teknisk infrastruktur.</p>
              </div>
            </div>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Prosjekt-highlights (utdrag)</h4>
            <ul class="bullets">
              <li><strong>Inline X Stream</strong>: hardwarevalg og IO‑design med kostbesparelse på ca. 60–80k NOK per enhet, inkl. custom IO‑kort + IO‑Link‑spor.</li>
              <li><strong>Herøya Industripark</strong>: kontrollsystem på PLC Next + cloud dashboard; estimert årlig strømbesparelse ~2 MNOK + redusert vedlikehold/nedetid.</li>
              <li><strong>Uptime walk‑to‑work</strong>: kontrollsystem for 3D-kompenserte gangveier med safety-PLS og integrasjonstest.</li>
              <li><strong>Inseanergy Subsolar</strong>: prototype hardware/software for flytende solcelleanlegg i oppdrettsmerd.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal: Helipad -->
    <section class="modal" id="modal-helipad" role="dialog" aria-modal="true" aria-labelledby="modal-helipad-title">
      <div class="modal-dialog">
        <div class="modal-head">
          <strong id="modal-helipad-title">Helipad 2.0 — Industrial Equipment Management (ModbusTCP)</strong>
          <button class="icon-btn" type="button" data-close-modal aria-label="Lukk">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M6 6l12 12M18 6 6 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="grid two">
            <div class="card">
              <h4 style="margin:0">Kort om prosjektet</h4>
              <p class="muted small" style="margin:10px 0 0">
                Helipad 2.0 er en moderne webapp for å overvåke og styre industrielt utstyr over ModbusTCP.
                Løsningen er laget for drift i felt (on‑prem), med rask UI, dark/light mode, og robust backend.
              </p>
              <div class="project-media" style="margin-top:14px">
                <img src="bilder/helipad-1.jpeg" alt="Helipad skjermbilde" loading="lazy" />
              </div>
            </div>

            <div class="card">
              <h4 style="margin:0">Teknologi</h4>
              <div class="chips" style="margin-top:12px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>React 18+ / TypeScript</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Vite</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Tailwind CSS</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Rust</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Axum + Tokio</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>ModbusTCP</span>
              </div>
              <p class="muted small" style="margin:12px 0 0">
                Frontend og backend kjører samlet (typisk på port 8082), og kan settes opp med reverse proxy (Nginx)
                ved behov.
              </p>
            </div>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Nøkkelfunksjoner (utdrag)</h4>
            <ul class="bullets">
              <li><strong>VFD control</strong> (Mitsubishi E‑800): status/control word, RPM, CW/CCW, start/stop.</li>
              <li><strong>Digital I/O</strong> (Advantech WISE‑4060): inn/ut med enkel oversikt og styring.</li>
              <li><strong>PLC ModbusTCP</strong>: generisk støtte for PLC-kommunikasjon.</li>
              <li><strong>VFD simulator (clone)</strong>: test uten fysisk drive, speiler status/control‑oppførsel.</li>
              <li><strong>Konfigurasjonssystem</strong>: JSON på target med auto-backup, GUI via Settings.</li>
              <li><strong>Deploy</strong>: scripts for IPC/NanoPI, systemd services, og offline deploy-støtte.</li>
              <li><strong>Versjon/oppdatering</strong>: OTA updates + changelog.</li>
            </ul>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Hvorfor det er relevant</h4>
            <p class="muted small" style="margin:10px 0 0">
              Prosjektet viser kombinasjonen av produkt-UI og “industrial-grade” integrasjon: protokoller,
              polling, sikker drift, og deploy på edge-maskinvare.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal: Ås Betong -->
    <section class="modal" id="modal-aas" role="dialog" aria-modal="true" aria-labelledby="modal-aas-title">
      <div class="modal-dialog">
        <div class="modal-head">
          <strong id="modal-aas-title">Ås Betong — Drift System (Modbus)</strong>
          <button class="icon-btn" type="button" data-close-modal aria-label="Lukk">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M6 6l12 12M18 6 6 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="grid two">
            <div class="card">
              <h4 style="margin:0">Kort om prosjektet</h4>
              <p class="muted small" style="margin:10px 0 0">
                Drift System er en on‑prem webapplikasjon for operatører i produksjonsmiljø. Systemet kobler UI mot PLC-er
                via Modbus, viser status/telemetri, og lar operatører gjøre kontrollerte endringer med tydelig feedback.
              </p>
              <p class="muted small" style="margin:10px 0 0">
                En nøkkel er <strong>deterministisk busskommunikasjon</strong>: skriver/kommandoer køes og sendes i neste
                sykliske poll, etterfulgt av read + caching for rask og stabil respons.
              </p>
            </div>

            <div class="card">
              <h4 style="margin:0">Teknologi</h4>
              <div class="chips" style="margin-top:12px">
                <span class="chip"><span class="mini" aria-hidden="true"></span>React 19 / TypeScript</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Vite + Tailwind</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Radix UI</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Framer Motion</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Rust</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>Axum + Tokio</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>tokio-modbus</span>
                <span class="chip"><span class="mini" aria-hidden="true"></span>SSE / polling</span>
              </div>
              <p class="muted small" style="margin:12px 0 0">
                Backend eksponerer API for Modbus, polling, system og UI-mappinger. Frontend er bygget som en moderne,
                komponentbasert kontrollflate med konfigurasjonsmodus.
              </p>
            </div>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Nøkkelløsninger (utdrag)</h4>
            <ul class="bullets">
              <li><strong>Syklisk polling</strong>: write-buffer → read → cache per PLC (konfigurerbar polling rate).</li>
              <li><strong>UI Mappings</strong>: knytter UI-elementer til Modbus-adresser uten hardkoding (CRUD + validering).</li>
              <li><strong>Konfigurasjonsmodus</strong>: klikk-for-å-map'e elementer, med indikatorer for mapped/unmapped.</li>
              <li><strong>Bulk values</strong>: rask frontend-oppdatering via `/api/ui-mappings/values` (polling).</li>
              <li><strong>Deploy/versjon</strong>: “fast deploy” for frontend, auto-versjonering, rollback og config-backups.</li>
            </ul>
          </div>

          <div class="card" style="margin-top:14px">
            <h4 style="margin:0">Hvorfor det er relevant</h4>
            <p class="muted small" style="margin:10px 0 0">
              Prosjektet viser styrken i å kombinere UX for operatører med robust industriintegrasjon: stabil Modbus-trafikk,
              konfigurerbar mapping, og et deploy-oppsett som støtter rask iterasjon uten å risikere produksjonskonfig.
            </p>
          </div>
        </div>
      </div>
    </section>

    <script>
      (() => {
        const root = document.documentElement;
        const scrollEl = document.querySelector(".scroll");
        const dots = Array.from(document.querySelectorAll(".dots a"));
        const slides = Array.from(document.querySelectorAll(".slide"));
        const toast = document.getElementById("toast");
        const toastText = document.getElementById("toastText");
        const nextBtn = document.getElementById("nextBtn");
        const modalErik = document.getElementById("modal-erik");
        const modalTommy = document.getElementById("modal-tommy");
        const modalHelipad = document.getElementById("modal-helipad");
        const modalAas = document.getElementById("modal-aas");

        const prefersReduced =
          window.matchMedia &&
          window.matchMedia("(prefers-reduced-motion: reduce)").matches;



        // iOS/Android preview helpers:
        // Some viewers (iOS Quick Look, in-app browsers) open HTML as a "preview" where scripts/scroll/reveal can behave oddly.
        // We can't force Safari from file://, but we can guide the user and open directly when served via http(s).
        (function setupOpenInSafari() {
          const openSafari = document.getElementById("openSafari");
          const openBtn = document.getElementById("openSafariBtn");
          const dismissBtn = document.getElementById("dismissSafariBtn");
          if (!openSafari || !openBtn || !dismissBtn) return;

          const ua = navigator.userAgent || "";
          const isIOS =
            /iPad|iPhone|iPod/.test(ua) || (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1);
          const isAndroid = /Android/.test(ua);
          const isMobile = window.matchMedia && window.matchMedia("(hover: none) and (pointer: coarse)").matches;
          const isFile = location.protocol === "file:";

          // Show platform-specific instructions
          const iosInst = document.getElementById("iosInstructions");
          const androidInst = document.getElementById("androidInstructions");
          if (iosInst && androidInst) {
            if (isIOS) iosInst.style.display = "block";
            else if (isAndroid) androidInst.style.display = "block";
          }

          // Show overlay on mobile when opened as a local file (most common "preview" case)
          if (isMobile && (isIOS || isAndroid) && isFile) {
            openSafari.classList.add("open");
          }

          openBtn.addEventListener("click", () => {
            // If served via http(s), we can reload in the same browser
            if (location.protocol === "http:" || location.protocol === "https:") {
              location.href = location.href;
              return;
            }

            // For file:// URLs, we can't force Safari, but we can try several approaches:
            
            // 1. Try iOS Safari URL scheme (usually doesn't work from file://, but worth trying)
            if (isIOS) {
              try {
                // Attempt to open Safari URL scheme (may prompt user)
                const safariUrl = "safari://" + encodeURIComponent(location.href);
                window.location.href = safariUrl;
                
                // Fallback: Try opening in new window (also usually blocked)
                setTimeout(() => {
                  try {
                    window.open(location.href, "_blank");
                  } catch (e) {
                    // Ignore - blocked by browser
                  }
                }, 100);
              } catch (e) {
                // If URL scheme fails, show instructions
                console.log("Safari URL scheme not available");
              }
            }

            // 2. For Android, try to open in Chrome
            if (isAndroid) {
              try {
                window.open(location.href, "_blank");
              } catch (e) {
                // Ignore - blocked
              }
            }

            // 3. Always show overlay with instructions (most reliable)
            openSafari.classList.add("open");
            
            // 4. Try to copy file path to clipboard (if possible) for user to paste in Safari
            if (navigator.clipboard && isIOS) {
              navigator.clipboard.writeText(location.href).catch(() => {
                // Ignore clipboard errors
              });
            }
          });

          dismissBtn.addEventListener("click", () => {
            openSafari.classList.remove("open");
          });
        })();

        // Theme
        const THEME_KEY = "eon-theme";
        const THEME_VALUES = new Set(["system", "light", "dark"]);

        function setTheme(value) {
          const theme = THEME_VALUES.has(value) ? value : "system";
          root.setAttribute("data-theme", theme);
          localStorage.setItem(THEME_KEY, theme);
          document.querySelectorAll("[data-theme-btn]").forEach((btn) => {
            const v = btn.getAttribute("data-theme-btn");
            btn.setAttribute("aria-pressed", String(v === theme));
          });
        }

        try {
          const saved = localStorage.getItem(THEME_KEY);
          if (saved) setTheme(saved);
        } catch {
          // ignore
        }

        document.querySelectorAll("[data-theme-btn]").forEach((btn) => {
          btn.addEventListener("click", () =>
            setTheme(btn.getAttribute("data-theme-btn"))
          );
        });

        // Reveal animations (IntersectionObserver)
        const revealEls = Array.from(document.querySelectorAll("[data-reveal]"));
        if (!prefersReduced && "IntersectionObserver" in window) {
          const io = new IntersectionObserver(
            (entries) => {
              for (const e of entries) {
                if (e.isIntersecting) e.target.classList.add("is-visible");
              }
            },
            { root: scrollEl, threshold: 0.22 }
          );
          revealEls.forEach((el) => io.observe(el));
        } else {
          revealEls.forEach((el) => el.classList.add("is-visible"));
        }

        // Projects swipe functionality for mobile
        (function setupProjectsSwipe() {
          const projectsScroll = document.querySelector(".projects-scroll");
          if (!projectsScroll) return;

          const isTouchDevice = window.matchMedia("(hover: none) and (pointer: coarse)").matches;
          if (!isTouchDevice) return;

          let touchStartX = 0;
          let touchEndX = 0;
          let isScrolling = false;

          projectsScroll.addEventListener("touchstart", (e) => {
            touchStartX = e.touches[0].clientX;
            isScrolling = false;
          }, { passive: true });

          projectsScroll.addEventListener("touchmove", () => {
            isScrolling = true;
          }, { passive: true });

          projectsScroll.addEventListener("touchend", (e) => {
            if (!isScrolling) return;
            touchEndX = e.changedTouches[0].clientX;
            const swipeDistance = touchStartX - touchEndX;
            const swipeThreshold = 50; // Minimum swipe distance

            if (Math.abs(swipeDistance) > swipeThreshold) {
              const scrollAmount = projectsScroll.offsetWidth * 0.9; // Scroll ~90% of container width
              const currentScroll = projectsScroll.scrollLeft;
              const targetScroll = swipeDistance > 0 
                ? currentScroll + scrollAmount // Swipe left (next)
                : currentScroll - scrollAmount; // Swipe right (previous)

              projectsScroll.scrollTo({
                left: targetScroll,
                behavior: "smooth"
              });
            }
          }, { passive: true });
        })();

        // Active slide + dots
        function setCurrentDot(idx) {
          dots.forEach((a, i) => a.setAttribute("aria-current", String(i === idx)));
        }

        function getClosestSlideIndex() {
          const top = scrollEl.scrollTop;
          let best = 0;
          let bestDist = Infinity;
          for (let i = 0; i < slides.length; i++) {
            const d = Math.abs(slides[i].offsetTop - top);
            if (d < bestDist) {
              bestDist = d;
              best = i;
            }
          }
          return best;
        }

        let rafId = 0;
        scrollEl.addEventListener(
          "scroll",
          () => {
            cancelAnimationFrame(rafId);
            rafId = requestAnimationFrame(() => setCurrentDot(getClosestSlideIndex()));
          },
          { passive: true }
        );

        // Keyboard navigation (Up/Down)
        function goToSlide(i) {
          const idx = Math.max(0, Math.min(slides.length - 1, i));
          slides[idx].scrollIntoView({ behavior: prefersReduced ? "auto" : "smooth" });
          setCurrentDot(idx);
        }

        function goNext() {
          goToSlide(getClosestSlideIndex() + 1);
        }
        function goPrev() {
          goToSlide(getClosestSlideIndex() - 1);
        }

        window.addEventListener("keydown", (e) => {
          const tag = (e.target && e.target.tagName) || "";
          const isTyping =
            tag === "INPUT" || tag === "TEXTAREA" || e.target.isContentEditable;
          if (isTyping) return;

          if (e.key === "ArrowDown" || e.key === "PageDown") {
            e.preventDefault();
            goNext();
          } else if (e.key === "ArrowUp" || e.key === "PageUp") {
            e.preventDefault();
            goPrev();
          } else if (e.key === "Home") {
            e.preventDefault();
            goToSlide(0);
          } else if (e.key === "End") {
            e.preventDefault();
            goToSlide(slides.length - 1);
          }
        });

        nextBtn?.addEventListener("click", goNext);

        // Modal open/close with focus management
        let lastFocus = null;
        function openModal(modalEl) {
          if (!modalEl) return;
          lastFocus = document.activeElement;
          modalEl.classList.add("open");
          document.body.style.overflow = "hidden";
          const closeBtn = modalEl.querySelector("[data-close-modal]");
          closeBtn?.focus();
        }
        function closeModal(modalEl) {
          if (!modalEl) return;
          modalEl.classList.remove("open");
          document.body.style.overflow = "hidden"; // body is already non-scroll; keep consistent
          if (lastFocus && typeof lastFocus.focus === "function") lastFocus.focus();
        }

        document.querySelectorAll("[data-open-modal]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const which = btn.getAttribute("data-open-modal");
            if (which === "erik") openModal(modalErik);
            if (which === "tommy") openModal(modalTommy);
            if (which === "helipad") openModal(modalHelipad);
            if (which === "aas") openModal(modalAas);
          });
        });
        document.querySelectorAll("[data-close-modal]").forEach((btn) => {
          btn.addEventListener("click", () => closeModal(btn.closest(".modal")));
        });
        window.addEventListener("keydown", (e) => {
          if (e.key !== "Escape") return;
          if (modalErik?.classList.contains("open")) {
            e.preventDefault();
            closeModal(modalErik);
          }
          if (modalTommy?.classList.contains("open")) {
            e.preventDefault();
            closeModal(modalTommy);
          }
          if (modalHelipad?.classList.contains("open")) {
            e.preventDefault();
            closeModal(modalHelipad);
          }
          if (modalAas?.classList.contains("open")) {
            e.preventDefault();
            closeModal(modalAas);
          }
        });
        modalErik?.addEventListener("click", (e) => {
          if (e.target === modalErik) closeModal(modalErik);
        });
        modalTommy?.addEventListener("click", (e) => {
          if (e.target === modalTommy) closeModal(modalTommy);
        });
        modalHelipad?.addEventListener("click", (e) => {
          if (e.target === modalHelipad) closeModal(modalHelipad);
        });
        modalAas?.addEventListener("click", (e) => {
          if (e.target === modalAas) closeModal(modalAas);
        });

        // Copy to clipboard
        function showToast(msg) {
          toastText.textContent = msg;
          toast.classList.add("show");
          window.setTimeout(() => toast.classList.remove("show"), 1400);
        }

        document.querySelectorAll("[data-copy]").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const text = btn.getAttribute("data-copy") || "";
            try {
              await navigator.clipboard.writeText(text);
              showToast("Kopiert: " + text);
            } catch {
              // Fallback
              const ta = document.createElement("textarea");
              ta.value = text;
              ta.setAttribute("readonly", "");
              ta.style.position = "fixed";
              ta.style.left = "-9999px";
              document.body.appendChild(ta);
              ta.select();
              document.execCommand("copy");
              document.body.removeChild(ta);
              showToast("Kopiert: " + text);
            }
          });
        });

        // Initial dot
        setCurrentDot(0);
      })();
    </script>
  </body>
</html>


